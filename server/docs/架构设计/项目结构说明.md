# 团队报名系统服务端项目结构

本文档提供团队报名系统服务端的详细目录结构说明。更全面的架构设计和实现指南请参阅 [DDD架构设计指南](DDD架构设计指南.md)。

## 当前目录结构

```
/src
  /app.js                # 应用入口点
  /config/               # 配置文件
  /domains/              # 领域层
    BaseService.js       # 服务基类
    /account/            # 账户领域
  /infrastructure/       # 基础设施层
    /common/             # 通用组件
    /data/               # 数据访问
    /external/           # 外部服务
    /web/                # Web组件
    /security/           # 安全组件
/docs                    # 文档目录
/logs                    # 日志目录
/data                    # 数据目录
```

## 领域层详细结构

当前已实现的账户领域内部结构：

```
/domains/account/          # 账户领域目录
  /models/                 # 领域模型
  /services/               # 领域服务
  /controllers/            # 控制器
  routes.js                # 路由定义
```

## 基础设施层详细结构

```
/infrastructure/
  /common/                # 通用组件
    /logging/             # 日志
    /utils/               # 工具类
  /data/                  # 数据访问
    /connectors/          # 数据库连接器
    /repositories/        # 仓储实现
  /external/              # 外部服务
    /payment/             # 支付服务
    /messaging/           # 消息服务
  /web/                   # Web组件
    /middlewares/         # 中间件
    /response/            # 响应格式化
    /routes/              # 路由管理
  /security/              # 安全组件
  index.js                # 基础设施入口
```

## 关键文件说明

### 应用启动相关

- **src/app.js**: 应用程序主入口点，负责初始化Express应用、加载中间件、依赖注入容器和事件发射器。

### 领域层关键文件

- **src/domains/BaseService.js**: 基础服务类，所有领域服务继承自它，提供通用功能和依赖解析。
- **src/domains/account/services/*.js**: 账户领域服务实现，包含用户认证和管理逻辑。
- **src/domains/account/controllers/*.js**: 账户API控制器，处理HTTP请求，调用领域服务。
- **src/domains/account/models/*.js**: 账户模型定义，包含字段定义和验证规则。
- **src/domains/account/routes.js**: 账户领域路由定义，将控制器方法映射到路由。

### 基础设施层关键文件

- **src/infrastructure/index.js**: 基础设施层入口，注册所有基础组件到容器。
- **src/infrastructure/data/connectors/**: 数据库连接管理，支持MongoDB、MySQL和文件系统。
- **src/infrastructure/web/routes/RouteLoader.js**: 自动加载所有领域路由到Express应用。

## 命名约定

- **文件夹命名**: 使用小写字母，多个单词之间不使用分隔符
- **文件命名**:
  - 模型: 大驼峰命名，如 `User.js`
  - 服务: 大驼峰命名 + Service后缀，如 `AccountService.js`
  - 控制器: 小驼峰命名 + Controller后缀，如 `accountController.js`
  - 路由: 使用 `routes.js`
- **类命名**: 大驼峰命名，如 `AccountService`
- **方法命名**: 小驼峰命名，动词开头，如 `createUser`
- **变量命名**: 小驼峰命名，如 `userProfile`

## 文件引用规则

为保持代码清晰和领域边界明确，项目采用以下引用规则：

1. **同领域内引用**：使用相对路径
   ```javascript
   // 服务引用同领域模型
   const User = require('../models/User');
   ```

2. **跨领域引用**：使用别名路径
   ```javascript
   // 跨领域引用
   const accountService = require('@domains/account/services/AccountService');
   ```

3. **基础设施引用**：使用别名路径
   ```javascript
   // 基础设施组件引用
   const logger = require('@logging/LoggerService');
   ```

## 待开发领域结构

项目规划了以下待开发领域，其结构将遵循相同的模式：

```
/domains/
  /registration/         # 报名领域
  /payment/              # 支付领域
  /statistics/           # 统计领域
```

更多关于架构设计和实现的内容，请参阅 [DDD架构设计指南](DDD架构设计指南.md)。
