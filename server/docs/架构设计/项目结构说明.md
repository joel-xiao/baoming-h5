# 团队报名系统服务端项目结构

## 目录结构说明

此项目结构采用领域驱动设计(DDD)的思想，以业务领域为中心组织代码，提高可维护性和可扩展性。

### 主要目录

- **/src/domains**: 业务领域目录，包含所有业务逻辑
  - **/account**: 账户领域
    - **/subdomains/auth**: 认证子领域，处理登录、认证等功能
    - **/subdomains/admin**: 管理员子领域，处理管理员管理、数据导出等功能
  - **/registration**: 报名领域
  - **/payment**: 支付领域
    - **/subdomains/wechat**: 微信支付子领域
    - **/subdomains/alipay**: 支付宝支付子领域
  - **/statistics**: 统计领域

- **/src/infrastructure**: 基础设施层，提供技术支持
  - **/database**: 数据库相关
  - **/storage**: 存储相关
  - **/security**: 安全相关
  - **/communication**: 通信相关
  - **/integration**: 外部集成
  - **/utils**: 通用工具
  - **/middleware**: 中间件
  - **/scheduler**: 任务调度

- **/src/lib**: 内部库
  - **/common**: 
  - **/extensions**: 扩展功能

- **/scripts**: 脚本工具

- **/docs**: 文档目录
  - **/架构设计**: 架构相关文档
  - **/部署文档**: 部署相关文档
  - **/测试文档**: 测试相关文档

### 领域目录结构

每个业务领域（如account、registration等）都遵循以下结构：

```
/domain
  /models       # 领域数据模型
  /services     # 领域服务
  /controllers  # 控制器
  /subdomains   # 子领域（小业务）
    /subdomain  # 具体子域
      /models
      /services
      /controllers
  /routes.js    # 领域路由聚合
```

## 主要文件说明

### 根目录

- **package.json**: 项目依赖和脚本
- **.env**: 环境变量配置
- **README.md**: 项目概述

### 应用入口

- **src/app.js**: 应用程序主入口，初始化Express、数据库连接和路由

### 领域层

- **src/domains/*/models/**: 领域数据模型
- **src/domains/*/services/**: 领域业务逻辑
- **src/domains/*/controllers/**: API控制器
- **src/domains/*/routes.js**: 领域路由

### 基础设施层

- **src/infrastructure/database/**: 数据库访问和连接
- **src/infrastructure/utils/**: 通用工具函数
- **src/infrastructure/middleware/**: Express中间件

## 依赖关系

项目的依赖关系遵循依赖倒置原则：

1. 业务领域层（domains）依赖于抽象接口
2. 基础设施层（infrastructure）实现抽象接口
3. 子领域可以依赖其所属的主领域
4. 领域之间通过领域事件通信，避免直接依赖

## 命名约定

- **文件夹命名**: 使用小写字母，多个单词之间不使用分隔符
- **文件命名**:
  - 模型: 大驼峰命名，如 `Registration.js`
  - 服务: 大驼峰命名 + Service后缀，如 `RegistrationService.js`
  - 控制器: 小驼峰命名 + Controller后缀，如 `registrationController.js`
  - 路由: 使用 `routes.js`
- **类命名**: 大驼峰命名，如 `RegistrationService`
- **方法命名**: 小驼峰命名，动词开头，如 `createRegistration`
- **变量命名**: 小驼峰命名，如 `userProfile`

## 代码规范

详细的代码规范请参考 [DDD架构设计指南](DDD架构设计指南.md) 文档。
